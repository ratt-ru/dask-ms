FROM kernsuite/base:5
RUN docker-apt-install python-pip python-casacore
RUN pip install --upgrade pip setuptools
ADD . /code
WORKDIR /code
# Test without xarray
RUN pip install .[testing]
RUN pip freeze
RUN py.test --flake8 -s -vvv /code/daskms
# Retest with xarray installed
RUN pip install .[testing,xarray]
RUN pip freeze
RUN py.test --flake8 -s -vvv /code/daskms
